<h2>ðŸ›’ Pedidos</h2>

<p *ngIf="errorMessage" class="text-danger mt-3">{{ errorMessage }}</p>

<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Cliente</th>
      <th>Total</th>
      <th>Status</th>
      <th>AÃ§Ãµes</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let pedido of pedidos">
      <td>{{ pedido.Id }}</td>
      <td>{{ pedido.DSC_Cliente }}</td>
      <td>{{ pedido.NUM_ValorTotal | currency:'BRL' }}</td>
      <td>{{ pedido.DSC_Status }}</td>
      <td>
        <button class="btn btn-primary btn-sm"
                (click)="criarNotaDePedido(pedido.Id)"
                [disabled]="pedido.DSC_Status === 'Fechada'">
          ðŸ§¾ Gerar Nota
        </button>
      </td>
    </tr>
  </tbody>
</table>

<h2>ðŸ›’ Novo Pedido</h2>

<form (ngSubmit)="criarPedido()" class="mt-3">
  <div class="mb-3">
    <label>Cliente:</label>
    <input type="text" [(ngModel)]="novoPedido.DSC_Cliente" name="cliente" class="form-control" required />
  </div>

  <div class="mt-3">
    <h5>Selecione os produtos:</h5>
    <div *ngFor="let produto of produtos" class="form-check">
      <input type="checkbox"
             class="form-check-input"
             [value]="produto.Id"
             (change)="toggleProduto(produto)">
      <label class="form-check-label">
        {{ produto.DSC_Name }} â€” {{ produto.NUM_UnitPrice | currency:'BRL' }} (Estoque: {{ produto.QTD_STOCK }})
      </label>
    </div>
  </div>

  <div class="mt-3">
    <strong>Total: </strong>{{ valorTotal | currency:'BRL' }}
  </div>

  <button type="submit" class="btn btn-primary mt-3">Salvar Pedido</button>
</form>
